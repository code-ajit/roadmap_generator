<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Roadmap Creation - Roadmap Generator</title>
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/dark-mode.css">
</head>
<body>
  <header class="main-header">
    <div class="header-left">
      <button class="back-btn" id="backBtn" title="Go Back" aria-label="Go Back">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15 19l-7-7 7-7" stroke="#e67c1b" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <span class="logo-icon">🗺️</span>
      <span class="app-title">Roadmap Generator</span>
    </div>
    <nav class="main-nav">
      <a href="dashboard.html" class="nav-link">Dashboard</a>
      <a href="creation.html" class="nav-link active">Roadmap Creation</a>
      <a href="quiz.html" class="nav-link">Quiz</a>
    </nav>
    <div class="header-right">
      <span class="notif-icon" title="Notifications">🔔</span>
      <div class="profile-dropdown-container">
        <img class="avatar" src="https://randomuser.me/api/portraits/men/32.jpg" alt="User Avatar" id="profileAvatar">
        <div class="profile-dropdown" id="profileDropdown" style="display:none;">
          <a href="#" id="logoutBtn">Logout</a>
        </div>
      </div>
    </div>
  </header>
  
  <main class="dashboard-main">
    <!-- Hero Section -->
    <div class="creation-hero">
      <div class="hero-content">
        <h1 class="hero-title">Create Your Learning Journey</h1>
        <p class="hero-description">Transform your career goals into structured learning paths with our intelligent roadmap generator</p>
        <div class="hero-features">
          <div class="feature-item">
            <span class="feature-icon">🎯</span>
            <span>Smart Goal Recognition</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon">📚</span>
            <span>50+ Learning Paths</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon">📊</span>
            <span>Progress Tracking</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Generator Section -->
    <div class="generator-container">
      <div class="generator-card">
        <div class="generator-header">
          <h2 class="generator-title">Start Your Journey</h2>
          <p class="generator-subtitle">Enter your learning goal and we'll create a personalized roadmap for you</p>
        </div>
        
        <form id="goal-form" class="generator-form">
          <div class="input-group">
            <div class="input-wrapper">
              <span class="input-icon">🎯</span>
              <input 
                id="goal-input" 
                type="text" 
                placeholder="e.g., Frontend Developer, Data Scientist, DevOps Engineer" 
                required 
                autocomplete="off"
              />
            </div>
            <button type="submit" class="generate-btn">
              <span class="btn-text">Generate Roadmap</span>
              <span class="btn-icon">🚀</span>
            </button>
          </div>
        </form>

        <!-- Search Section -->
        <div id="search-section" class="search-section" style="display: none;">
          <div class="search-wrapper">
            <span class="search-icon">🔍</span>
            <input 
              id="search-bar" 
              type="text" 
              placeholder="Search roadmap steps..." 
              autocomplete="off"
            />
          </div>
        </div>

        <!-- Roadmap Display -->
        <div id="roadmap-section" class="roadmap-section"></div>
      </div>
    </div>

    <!-- Modal Container -->
    <div id="modal-container" class="modal-container"></div>
  </main>

  <script src="../js/app.js"></script>
  <script>
    // Wait for DOM to be loaded and app.js functions to be available
    document.addEventListener('DOMContentLoaded', function() {
      // Wait a bit more to ensure app.js has finished loading
      setTimeout(() => {
        // Enhanced form submission with loading state and smooth animations
        const form = document.getElementById('goal-form');
        const generateBtn = form.querySelector('.generate-btn');
        const btnText = generateBtn.querySelector('.btn-text');
        const btnIcon = generateBtn.querySelector('.btn-icon');
        const goalInput = document.getElementById('goal-input');
        const searchSection = document.getElementById('search-section');
        const roadmapSection = document.getElementById('roadmap-section');

    // Add smooth focus effects
    goalInput.addEventListener('focus', function() {
      this.parentElement.style.transform = 'scale(1.02)';
    });

    goalInput.addEventListener('blur', function() {
      this.parentElement.style.transform = 'scale(1)';
    });

    // Enhanced form submission
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const goal = goalInput.value.trim();
      if (!goal) {
        // Add shake animation for empty input
        goalInput.style.animation = 'shake 0.5s ease-in-out';
        setTimeout(() => {
          goalInput.style.animation = '';
        }, 500);
        return;
      }
      
      // Add loading state with smooth transitions
      generateBtn.disabled = true;
      btnText.textContent = 'Generating...';
      btnIcon.textContent = '⏳';
      generateBtn.classList.add('loading');
      generateBtn.style.transform = 'scale(0.98)';
      
      // Add input field loading state
      goalInput.style.opacity = '0.7';
      goalInput.disabled = true;
      
      // Simulate processing time for better UX
      setTimeout(() => {
        // Reset button state
        generateBtn.disabled = false;
        btnText.textContent = 'Generate Roadmap';
        btnIcon.textContent = '🚀';
        generateBtn.classList.remove('loading');
        generateBtn.style.transform = '';
        
        // Reset input field
        goalInput.style.opacity = '1';
        goalInput.disabled = false;
        
        // Show search section with smooth animation
        searchSection.style.display = 'block';
        searchSection.style.opacity = '0';
        searchSection.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
          searchSection.style.opacity = '1';
          searchSection.style.transform = 'translateY(0)';
        }, 100);
        
        // Trigger roadmap generation
        const key = findRoadmapKey(goal);
        renderRoadmap(ROADMAPS[key], key || goal, goal);
        
        // Add success animation
        generateBtn.style.background = 'linear-gradient(135deg, #16a34a 0%, #15803d 100%)';
        btnIcon.textContent = '✅';
        
        setTimeout(() => {
          generateBtn.style.background = '';
          btnIcon.textContent = '🚀';
        }, 2000);
      }, 800);
    });

    // Enhanced search functionality
    const searchBar = document.getElementById('search-bar');
    if (searchBar) {
      searchBar.addEventListener('focus', function() {
        this.parentElement.style.transform = 'scale(1.02)';
      });

      searchBar.addEventListener('blur', function() {
        this.parentElement.style.transform = 'scale(1)';
      });

      searchBar.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const roadmapSteps = document.querySelectorAll('.roadmap-step-card');
        
        roadmapSteps.forEach(step => {
          const title = step.querySelector('.step-title').textContent.toLowerCase();
          const description = step.querySelector('.step-description').textContent.toLowerCase();
          
          if (title.includes(searchTerm) || description.includes(searchTerm)) {
            step.style.opacity = '1';
            step.style.transform = 'scale(1)';
          } else {
            step.style.opacity = '0.3';
            step.style.transform = 'scale(0.98)';
          }
        });
      });
    }

    // Add smooth animations for roadmap steps
    function animateRoadmapSteps() {
      const steps = document.querySelectorAll('.roadmap-step-card');
      steps.forEach((step, index) => {
        step.style.opacity = '0';
        step.style.transform = 'translateY(30px)';
        
        setTimeout(() => {
          step.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
          step.style.opacity = '1';
          step.style.transform = 'translateY(0)';
        }, index * 100);
      });
    }

    // Enhanced roadmap rendering with animations
    const originalRenderRoadmap = window.renderRoadmap;
    window.renderRoadmap = function(roadmap, key, goal) {
      // Clear previous content with fade out
      roadmapSection.style.opacity = '0';
      roadmapSection.style.transform = 'translateY(20px)';
      
      setTimeout(() => {
        // Call original function
        originalRenderRoadmap(roadmap, key, goal);
        
        // Animate new content in
        setTimeout(() => {
          roadmapSection.style.opacity = '1';
          roadmapSection.style.transform = 'translateY(0)';
          animateRoadmapSteps();
        }, 100);
      }, 300);
    };

    // Add hover effects for better interactivity
    generateBtn.addEventListener('mouseenter', function() {
      if (!this.disabled) {
        this.style.transform = 'translateY(-2px)';
      }
    });

    generateBtn.addEventListener('mouseleave', function() {
      if (!this.disabled) {
        this.style.transform = '';
      }
    });

    // Add smooth scroll behavior
    document.documentElement.style.scrollBehavior = 'smooth';
    
    // Profile dropdown logic
    const profileAvatar = document.getElementById('profileAvatar');
    const profileDropdown = document.getElementById('profileDropdown');
    const logoutBtn = document.getElementById('logoutBtn');

    if (profileAvatar && profileDropdown && logoutBtn) {
      profileAvatar.addEventListener('click', function(e) {
        e.stopPropagation();
        const currentDisplay = profileDropdown.style.display;
        const newDisplay = currentDisplay === 'block' ? 'none' : 'block';
        profileDropdown.style.display = newDisplay;
      });

      document.addEventListener('click', function(e) {
        if (profileDropdown.style.display === 'block') {
          profileDropdown.style.display = 'none';
        }
      });

      profileDropdown.addEventListener('click', function(e) {
        e.stopPropagation();
      });

      logoutBtn.addEventListener('click', function(e) {
        e.preventDefault();
        window.location.href = '../index.html';
      });
    }

    // Back button navigation
    const backBtn = document.getElementById('backBtn');
    if (backBtn) {
      backBtn.addEventListener('click', () => {
        window.history.back();
      });
    }
      }, 100); // Close setTimeout
    }); // Close DOMContentLoaded
  </script>
  <script src="../js/dark-mode.js"></script>
</body>
</html> 